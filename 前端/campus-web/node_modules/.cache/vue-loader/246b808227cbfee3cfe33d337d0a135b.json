{"remainingRequest":"D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\src\\views\\admin\\children\\School.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\src\\views\\admin\\children\\School.vue","mtime":1716859618000},{"path":"D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716643298000},{"path":"D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1716643298000},{"path":"D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1716643298000},{"path":"D:\\计算机214-35-刘耀祖-web课程设计\\代码\\springbootVue-campus-master\\前端\\campus-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1716643296000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogIlNjaG9vbCIsCiAgICAgICAgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHZhbHVlOm51bGwsCgogICAgICAgICAgICAgICAgc2Nob29scyA6IFtdLAogICAgICAgICAgICAgICAgLy8g5by55Ye65bGC5qCH6aKYCiAgICAgICAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgICAgICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgICAgICAgICAgIG9wZW46IGZhbHNlLAogICAgICAgICAgICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgICAgICAgICAgICBmb3JtOiB7fSwKICAgICAgICAgICAgICAgIC8vIOihqOWNleagoemqjAogICAgICAgICAgICAgICAgcnVsZXM6IHt9LAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGd1aWQyKCkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gUzQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAoUzQoKSArIFM0KCkgKyAiLSIgKyBTNCgpICsgIi0iICsgUzQoKSArICItIiArIFM0KCkgKyAiLSIgKyBTNCgpICsgUzQoKSArIFM0KCkpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8tLS0tLS0t5paw5Yqg5YWlLS0tLS0tLS0tCgogICAgICAgICAgICAvKiog5paw5aKe5oyJ6ZKu5pON5L2cICovCiAgICAgICAgICAgIGhhbmRsZUFkZChhLGIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGIuY2hpbGRyZW4ubGVuZ3RoKQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYikKICAgICAgICAgICAgICAgIGlmKGIuc2Nob29sSWQgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZT1iOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gIua3u+WKoOWtpuagoeS/oeaBryI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8qKiDmj5DkuqTmjInpkq4gKi8KICAgICAgICAgICAgc3VibWl0KCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy52YWx1ZS5jaGlsZHJlbj8uWzBdKQogICAgICAgICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0dWFnZSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3TGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRwb3N0KCIvc2Nob29sIix7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHRoaXMuZm9ybS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoIuaWsOWinuWtpuagoeaIkOWKnyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRwb3N0KCIvZGVwdCIsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzY2hvb2xJZCI6dGhpcy52YWx1ZS5zY2hvb2xJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHRoaXMuZm9ybS5kZXB0bmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmZvcm0uZGVwdG5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTAgO2k8dGhpcy52YWx1ZS5jaGlsZHJlbi5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy52YWx1ZS5jaGlsZHJlbj8uW2ldLmRlcHRuYW1lPT1uYW1lKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoIuaWsOWinuS4k+S4muaIkOWKnyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRwb3N0KCIvY2xhc3MiLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzY2hvb2xJZCI6dGhpcy52YWx1ZS5zY2hvb2xJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkZXB0SWQiOnRoaXMudmFsdWUuY2hpbGRyZW4/LltpXS5kZXB0c0lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB0aGlzLmZvcm0uY2xhc3Nlc25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCLmlrDlop7nj63nuqfmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpc3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAoKCgogICAgICAgICAgICAvLyDlj5bmtojmjInpkq4KICAgICAgICAgICAgY2FuY2VsKCkgewogICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGhhbmRsZURlbGV0ZShhLGIpewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYik7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoYi5zY2hvb2xJZCAhPSBudWxsKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRkZWwoIi9zY2hvb2wvIitiLnNjaG9vbElkKQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5TXNnKCLmiJDlip8iLCByZXMuZGF0YS5tc2csICJzdWNjZXNzIikKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaXN0KCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfWVsc2UgaWYoYi5kZXB0c0lkICE9IG51bGwpewogICAgICAgICAgICAgICAgICAgICB0aGlzLiRkZWwoIi9kZXB0LyIrYi5kZXB0c0lkKQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnlNc2coIuaIkOWKnyIsIHJlcy5kYXRhLm1zZywgInN1Y2Nlc3MiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXdMaXN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGRlbCgiL2NsYXNzLyIrYi5jbGFzc2VzSWQpCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeU1zZygi5oiQ5YqfIiwgcmVzLmRhdGEubXNnLCAic3VjY2VzcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld0xpc3QoKQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8KICAgICAgICAgICAgaGFuZGxlVXBkYXRlKGEsYikgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYik7CiAgICAgICAgICAgICAgICB0aGlzLiRnZXQoIi9zY2hvb2wvIitiLnNjaG9vbElkKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSByZXMuZGF0YS5zY2hvb2w7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gIuS/ruaUueWtpuagoeeuoeeQhiI7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG5ld0xpc3QoKXsKICAgICAgICAgICAgICAgIHRoaXMuJGdldCgnL3NjaG9vbCcpCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2Nob29scykKICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaG9vbHMgPSByZXMuZGF0YS5zY2hvb2wKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyDooajljZXph43nva4KICAgICAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICAgICAgICAgIGlkOiBudWxsLAogICAgICAgICAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICAgICAgICAgIGFnZTogbnVsbAogICAgICAgICAgICB9OwogICAgICAgICAgICAvLyB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLy0tLS0tLS3mlrDliqDlhaUtLS0tLS0tLS0KICAgICAgICB9LAoKICAgICAgICBjcmVhdGVkKCkgewogICAgICAgICAgICB0aGlzLm5ld0xpc3QoKTsKICAgICAgICB9LAoKICAgICAgICBjb21wdXRlZDp7CiAgICAgICAgICAgIGRhdGFMaXN0KCl7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hvb2xzLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgZGVwdHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDtpPGl0ZW1bJ2RlcHRzJ10ubGVuZ3RoO2krKyl7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW1bJ2RlcHRzJ11baV1bJ2NsYXNzZXMnXSkKICAgICAgICAgICAgICAgICAgICAgICAgZGVwdHMucHVzaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0c0lkIDogaXRlbVsnZGVwdHMnXVtpXS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0bmFtZSA6IGl0ZW1bJ2RlcHRzJ11baV0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkIDogdGhpcy5ndWlkMigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGVwdHMpCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDtqPGl0ZW1bJ2RlcHRzJ11baV1bJ2NsYXNzZXMnXS5sZW5ndGg7aisrKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzSWQgOiBpdGVtWydkZXB0cyddW2ldWydjbGFzc2VzJ11bal0uaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXNuYW1lOml0ZW1bJ2RlcHRzJ11baV1bJ2NsYXNzZXMnXVtqXS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkIDogdGhpcy5ndWlkMigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHRzW2ldLmNoaWxkcmVuID0gY2hpbGRyZW4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nob29sSWQgOiBpdGVtLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuIDogZGVwdHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkIDogdGhpcy5ndWlkMigpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["School.vue"],"names":[],"mappings":";AA+EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"School.vue","sourceRoot":"src/views/admin/children","sourcesContent":["<template>\n    <div class=\"content\">\n        <el-table\n                :data=\"dataList\"\n                style=\"width: 100%;margin-bottom: 20px;\"\n                row-key=\"uuid\"\n                border\n                :default-expand-all = 'false'\n                :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\">\n            <el-table-column\n                    prop=\"name\"\n                    label=\"学校\"\n                    sortable\n                    width=\"230\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"deptname\"\n                    label=\"专业\"\n                    sortable\n                    width=\"180\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"classesname\"\n                    label=\"班级\">\n            </el-table-column>\n\n            <el-table-column label=\"操作\">\n                <template slot-scope=\"scope\">\n                    <el-button\n                            icon=\"el-icon-plus\"\n                            size=\"mini\"\n                            @click=\"handleAdd(scope.$index, scope.row)\">增加\n                    </el-button>\n\n                    <el-button\n                            icon=\"el-icon-edit\"\n                            size=\"mini\"\n                            @click=\"handleUpdate(scope.$index, scope.row)\">修改\n                    </el-button>\n\n                    <el-button\n                            icon=\"el-icon-delete\"\n                            size=\"mini\"\n                            type=\"danger\"\n                            @click=\"handleDelete(scope.$index, scope.row)\">删除\n                    </el-button>\n                </template>\n            </el-table-column>\n\n            <!-- ------------新加入---------- -->\n\n\n            <!-- 添加或修改学生管理对话框 -->\n            <el-dialog :title=\"title\"  :visible.sync=\"open\" width=\"500px\" append-to-body>\n                <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n                        <el-form-item label=\"学区\" prop=\"name\">\n                        <el-input v-model=\"form.name\" placeholder=\"请输入学区\" />\n                        </el-form-item>\n                        <el-form-item label=\"院系\" prop=\"deptname\">\n                        <el-input v-model=\"form.deptname\" placeholder=\"请输入院系\" />\n                        </el-form-item>\n                        <el-form-item label=\"专业\"  prop=\"classesname\">\n                        <el-input  placeholder=\"请输入专业\" v-model=\"form.classesname\"/>\n                        </el-form-item>\n                    </el-form>\n                         <div slot=\"footer\" class=\"dialog-footer\" >\n                            <el-button type=\"primary\" @click=\"submit()\">确 定</el-button>\n                            <el-button @click=\"cancel\">取 消</el-button>\n                        </div> \n            </el-dialog>\n\n        </el-table>\n\n\n        <!-- ------------新加入---------- -->\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"School\",\n        data() {\n            return {\n                value:null,\n\n                schools : [],\n                // 弹出层标题\n                title: \"\",\n                // 是否显示弹出层\n                open: false,\n                // 表单参数\n                form: {},\n                // 表单校验\n                rules: {},\n            }\n        },\n        methods: {\n            guid2() {\n                function S4() {\n                    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n                }\n                return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n            },\n\n            //-------新加入---------\n\n            /** 新增按钮操作 */\n            handleAdd(a,b) {\n                console.log(b.children.length)\n                // console.log(b)\n                if(b.schoolId != null){\n                    this.value=b;\n                    this.reset();\n                    this.title = \"添加学校信息\";\n                    this.open = true;\n                }\n            },\n\n            /** 提交按钮 */\n            submit() {\n                console.log(this.value.children?.[0])\n            this.$refs[\"form\"].validate(valid => {\n                if (valid) {\n                    if (this.form.id != null) {\n                        updateStuage(this.form).then(response => {\n                        this.$message(\"修改成功\");\n                        this.open = false;\n                        this.newList();\n                        });\n                    } else {\n                        this.$post(\"/school\",{\n                            \"name\": this.form.name,\n                        }).then(response => {\n                            this.$message(\"新增学校成功\");\n                            this.newList();\n                            this.$post(\"/dept\",{\n                                \"schoolId\":this.value.schoolId,\n                                \"name\": this.form.deptname,\n                            }).then(response => {\n                                const name = this.form.deptname;\n                                for(let i=0 ;i<this.value.children.length;i++){\n                                    if(this.value.children?.[i].deptname==name){\n                                        this.$message(\"新增专业成功\");\n                                        this.newList();\n                                        this.$post(\"/class\",{\n                                        \"schoolId\":this.value.schoolId,\n                                        \"deptId\":this.value.children?.[i].deptsId,\n                                        \"name\": this.form.classesname,\n                                        }).then(response => {\n                                            this.$message(\"新增班级成功\");\n                                            this.newList();\n                                        });\n                                    }\n                                }\n                                \n                            });\n                            this.$message(\"新增成功\");\n                            this.open = false;\n                            this.newList();\n                            });\n                    }\n                }\n            });\n            },\n\n\n\n            // 取消按钮\n            cancel() {\n            this.open = false;\n            },\n\n            handleDelete(a,b){\n                console.log(b);                \n                if(b.schoolId != null){\n                    this.$del(\"/school/\"+b.schoolId)\n                    .then((res) => {\n                        this.$notifyMsg(\"成功\", res.data.msg, \"success\")\n                        this.newList()\n                    })\n                }else if(b.deptsId != null){\n                     this.$del(\"/dept/\"+b.deptsId)\n                        .then((res) => {\n                            this.$notifyMsg(\"成功\", res.data.msg, \"success\")\n                            this.newList()\n                        })\n                }else{\n                    this.$del(\"/class/\"+b.classesId)\n                        .then((res) => {\n                            this.$notifyMsg(\"成功\", res.data.msg, \"success\")\n                            this.newList()\n                        })\n                }\n            },\n\n\n            /** 修改按钮操作 */\n            handleUpdate(a,b) {\n                // console.log(b);\n                this.$get(\"/school/\"+b.schoolId).then((res) => {\n                    this.form = res.data.school;\n                    this.open = true;\n                    this.title = \"修改学校管理\";\n                });\n            },\n\n            newList(){\n                this.$get('/school')\n                .then(res => {\n                    // console.log(res.data)\n                    // console.log(this.schools)\n                    this.schools = res.data.school\n                })\n            },\n\n            // 表单重置\n            reset() {\n            this.form = {\n                id: null,\n                name: null,\n                age: null\n            };\n            // this.resetForm(\"form\");\n            },\n            //-------新加入---------\n        },\n\n        created() {\n            this.newList();\n        },\n\n        computed:{\n            dataList(){\n                return this.schools.map(item => {\n                    let depts = [];\n                    for (let i = 0;i<item['depts'].length;i++){\n                        // console.log(item['depts'][i]['classes'])\n                        depts.push(\n                            {\n                                deptsId : item['depts'][i].id,\n                                deptname : item['depts'][i].name,\n                                uuid : this.guid2()\n                            }\n                        )\n                        // console.log(depts)\n                        let children = [];\n                        for (let j = 0;j<item['depts'][i]['classes'].length;j++){\n                            children.push(\n                                {\n                                    classesId : item['depts'][i]['classes'][j].id,\n                                    classesname:item['depts'][i]['classes'][j].name,\n                                    uuid : this.guid2()\n                                }\n                            )\n                        }\n                        depts[i].children = children\n                    }\n                    return{\n                            schoolId : item.id,\n                            name : item.name,\n                            children : depts,\n                            uuid : this.guid2()\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped lang=\"less\">\n    .content {\n        padding: 0 1%;\n    }\n</style>"]}]}